<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="main.com.WCZZ.mapper.ManagerMapper">
<!--  <resultMap id="BaseResultMap" type="main.com.WCZZ.entity.Manager">
    <id column="man_id" jdbcType="INTEGER" property="manId" />
    <result column="man_name" jdbcType="VARCHAR" property="manName" />
    <result column="sex" jdbcType="VARCHAR" property="sex" />
    <result column="job" jdbcType="VARCHAR" property="job" />
    <result column="phone" jdbcType="VARCHAR" property="phone" />
    <result column="gra_name" jdbcType="INTEGER" property="graName" />
    <result column="create_time" jdbcType="DATE" property="createTime" />
    <result column="del_flag" jdbcType="INTEGER" property="delFlag" />
  </resultMap>-->

  <insert id="add" parameterType="main.com.WCZZ.entity.Manager">
    INSERT INTO manager(
    man_name,
    sex,
    job,
    phone,
    gra_name,
    create_time
    )
    VALUES(
    #{stuName},
    #{sex},
    #{job},
    #{phone},
    #{gra_name},
    #{create_time}
    )
  </insert>


  <select id="query" parameterType="main.com.WCZZ.entity.Manager" resultType="main.com.WCZZ.entity.Manager">
    SELECT
    *
    FROM manager
    <where>
      <if test='manId != null and manId != "-1"'>
        stu_id LIKE CONCAT('%',#{manId},'%')
      </if>
      <if test='manName != null and manName != " "'>
        AND man_name LIKE CONCAT('%',#{manName},'%')
      </if>
      <if test='graName != null and graName != "-1"'>
        AND gra_name LIKE CONCAT('%',#{graName},'%')
      </if>
    </where>
  </select>

  <update id="modifyPhone">
    UPDATE manager
    SET
    phone = #{phone}
    WHERE man_id = #{manId}
  </update>

  <update id="modifyPassword" parameterType="main.com.WCZZ.entity.User">
    UPDATE user
    SET
    password = #{password}
    WHERE username = #{username}
  </update>

  <update id="delete">
    UPDATE manager
    SET
    del_flag = 0
    WHERE man_id = #{manId}
  </update>


</mapper>